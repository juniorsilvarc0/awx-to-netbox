---
- name: Executar sincroniza√ß√£o AWX ‚Üí NetBox via script Python
  hosts: localhost
  gather_facts: false

  tasks:
    - name: Executar script Python diretamente do reposit√≥rio
      ansible.builtin.shell: |
        echo "üîç Verificando vari√°veis..."
        echo "AWX_USERNAME: ${AWX_USERNAME:-'N√ÉO DEFINIDO'}"
        echo "AWX_PASSWORD: ${AWX_PASSWORD:+'DEFINIDO'}"
        echo "NETBOX_API: ${NETBOX_API:-'N√ÉO DEFINIDO'}"
        echo "NETBOX_TOKEN: ${NETBOX_TOKEN:+'DEFINIDO'}"
        echo ""
        echo "üöÄ Executando script Python..."
        python3 scripts/awx-netbox.py
      args:
        chdir: "{{ ansible_env.ANSIBLE_PROJECT_DIR | default('.') }}"
      register: script_result

    - name: Mostrar resultado do script
      debug:
        var: script_result
